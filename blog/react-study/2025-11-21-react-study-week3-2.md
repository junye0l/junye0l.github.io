---
slug: react-study-week3-2
title: "ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œ ìŠ¤í„°ë”” 3ì£¼ì°¨ - 2"
authors: [junye0l]
---

#### 3ì£¼ì°¨ 2ë²ˆì§¸

> Render and Commit

<h2>Intro</h2>

> Reactê°€ UIë¥¼ í™”ë©´ì— ë„ìš°ëŠ” ê³¼ì •ì€ ì„¸ ë‹¨ê³„ë¡œ ì´ë£¨ì–´ì§„ë‹¤.
>
> 1. _**Triggering**_ : Reactì— `í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•´ë¼` ë¼ëŠ” ìš”ì²­ì´ ë“¤ì–´ì˜¨ë‹¤.
> 2. _**Rendering**_ : ì»´í¬ë„ŒíŠ¸ì˜ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ `JSX íŠ¸ë¦¬`ë¥¼ ë§Œë“ ë‹¤.
> 3. _**Committing**_ : ê²°ê³¼ë¬¼ì„ `ì‹¤ì œ DOM`ì— ë°˜ì˜í•œë‹¤.

<h2>Trigger a render</h2>

> ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë˜ëŠ” ì´ìœ ëŠ” ë‘ ê°€ì§€ê°€ ìˆë‹¤.
>
> 1. _**initial render**_
> 2. _**state has been updated**_

<h3>initial render</h3>

```javascript
import Image from "./Image.js";
import { createRoot } from "react-dom/client";

const root = createRoot(document.getElementById("root"));
root.render(<Image />);
```

- ì•±ì´ ì‹œì‘ë  ë•Œ, `createRoot`ë¡œ íƒ€ê²Ÿ DOM ë…¸ë“œë¥¼ ì§€ì •í•˜ê³  ê·¸ rootì˜ `render` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ëœë‹¤.

<h3>Re-renders</h3>

- ì»´í¬ë„ŒíŠ¸ê°€ í•œ ë²ˆ ì²˜ìŒ ë Œë”ëœ ì´í›„, stateì˜ set í•¨ìˆ˜ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ ë‹¤ì‹œ ë Œë”ë¥¼ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë‹¤.

- ë˜í•œ, ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ë©´ ìë™ìœ¼ë¡œ ëŒ€ê¸° ëª©ë¡ ( Queue )ì— ì¶”ê°€í•œë‹¤.

<h2>React renders your components</h2>

- _**On initial render**_ : ReactëŠ” ì´ˆê¸° ë Œë”ì‹œ root ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•œë‹¤.

- _**For subsequent renders**_ : ì´í›„ì˜ ë Œë”ì—ì„œëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ Reactê°€ í˜¸ì¶œí•œë‹¤.

- ì´ëŸ¬í•œ ê³¼ì •ì„ ì¬ê·€ì  ( ë°˜ë³µì  )ìœ¼ë¡œ ì§„í–‰ë˜ê³ , ë” ì´ìƒ ì¤‘ì²©ëœ ì»´í¬ë„ŒíŠ¸ê°€ ì—†ì„ ë•Œ ê¹Œì§€ ë°˜ë³µë˜ì–´, ReactëŠ” í™”ë©´ì— ë¬´ì—‡ì„ ë³´ì—¬ì¤„ì§€ ìµœì¢…ì ìœ¼ë¡œ ê²°ì •í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

  > **ì´ˆê¸° ë Œë” -> ì—…ë°ì´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ -> ì—…ë°ì´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ê°€ ë°˜í™˜í•œ ì»´í¬ë„ŒíŠ¸ -> .. -> ìµœì¢… ì»´í¬ë„ŒíŠ¸**

</br>

- ë Œë”ë§ì€ ë°˜ë“œì‹œ `pure calculation`ì´ì–´ì•¼ í•œë‹¤.

  > í† ë§ˆí† ë§Œ ë“¤ì–´ê°„ ìƒëŸ¬ë“œë¥¼ ì£¼ë¬¸í–ˆëŠ”ë°, ì–‘íŒŒê°€ ë“¤ì–´ê°„ ìƒëŸ¬ë“œê°€ ë‚˜ì˜¤ë©´ ì•ˆëœë‹¤.

</br>

- Reactì˜ `Strict Mode`ëŠ” ê° ì»´í¬ë„ŒíŠ¸ì˜ í•¨ìˆ˜ë¥¼ ì¼ë¶€ëŸ¬ ë‘ ë²ˆì”© í˜¸ì¶œí•´ í•¨ìˆ˜ì˜ ìˆœìˆ˜ì„±ì„ ê²€ì¦í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

- ì—…ë°ì´íŠ¸ëœ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ treeì˜ ìƒìœ„ì— ìˆë‹¤ë©´ ëª¨ë“  ì¤‘ì²© ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ì–´ ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ë¹„íš¨ìœ¨ì  ì¼ ìˆ˜ ìˆë‹¤.

  > <a href="https://legacy.reactjs.org/docs/optimizing-performance.html">ì„±ëŠ¥ ìµœì í™”ì— ëŒ€í•œ ë¬¸ì„œ</a>

  > **ë¯¸ë¦¬ ìµœì í™”ë¥¼ í•˜ëŠ” ê²ƒì€ ì˜¤íˆë ¤ ë³µì¡ë„ë§Œ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤.**

<h2>React commits changes to the Dom</h2>

> ReactëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë Œë”ë§í•œ ì´í›„, ì‹¤ì œ DOMì„ ìˆ˜ì •í•œë‹¤.

- _**initial render**_ : Reactê°€ ìƒì„±í•œ ëª¨ë“  DOM ë…¸ë“œë“¤ì„ í™”ë©´ì— í‘œì‹œí•˜ê¸° ìœ„í•´ **<a href="">appendChild()</a>** DOM APIë¥¼ ì‚¬ìš©í•œë‹¤.

- _**re-renders**_ : Reactê°€ ë Œë”ë§ ê³¼ì •ì—ì„œ ê³„ì‚°í•œ **ìµœì†Œí™˜ì˜ ì‘ì—…**ë§Œ ì ìš©í•˜ì—¬ ìµœì‹  ë Œë”ë§ ê²°ê³¼ì™€ DOMì´ ì¼ì¹˜í•˜ë„ë¡ ë§Œë“ ë‹¤.

<h2>Browser paint</h2>

- _**Browser Rendering**_ : ë Œë”ë§ ì™„ë£Œ í›„ Reactê°€ DOMì„ ì—…ë°ì´íŠ¸ í•œ ë’¤, ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” ê³¼ì •

</br>

> _**Recap**_
>
> ğŸ­. **React ì•±ì—ì„œ í™”ë©´ì´ ì—…ë°ì´íŠ¸ë  ë•ŒëŠ” í•­ìƒ Trigger, Render, Commit ì„¸ ë‹¨ê³„ë¡œ ì§„í–‰ëœë‹¤.**
>
> ğŸ¤. **Strice Modeë¥¼ ì‚¬ìš©í•˜ë©´ ìš°ë¦¬ê°€ ë§Œë“  ì»´í¬ë„ŒíŠ¸ì˜ ì‹¤ìˆ˜ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.**
>
> ğŸ¥. **ReactëŠ” ë Œë”ë§ ê²°ê³¼ê°€ ì´ì „ê³¼ ê°™ìœ¼ë©´, DOMì„ ê±´ë“œë¦¬ì§€ ì•ŠëŠ”ë‹¤.**

</br>

> State as a Snapshot

- stateëŠ” snapshotì²˜ëŸ¼ ë™ì‘í•œë‹¤.

- ê°’ì„ setí•´ë„ ê¸°ì¡´ state ë³€ìˆ˜ê°€ ì¦‰ì‹œ ë°”ë€ŒëŠ”ê²Œ ì•„ë‹Œ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ re-renderëœë‹¤.

<h3>Setting state triggers renders</h3>

- ì–´ë–¤ ì´ë²¤íŠ¸ì— UIê°€ ë°˜ì‘í•˜ë ¤ë©´ ë°˜ë“œì‹œ stateë¥¼ ì—…ë°ì´íŠ¸ í•´ì•¼ í•œë‹¤.
  > Reactì—ì„œëŠ” í´ë¦­ ê°™ì€ ì‚¬ìš©ì ì´ë²¤íŠ¸ì— ë°”ë¡œ ë°˜ì‘ í›„ ë³€í™”ë¼ëŠ” ì§ê´€ì ì¸ ëª¨ë¸ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•œë‹¤.

<h3>Rendering takes a snapshot in time</h3>

- _**Rendering :**_ Reactê°€ ì»´í¬ë„ŒíŠ¸ ( í•¨ìˆ˜ )ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²°ê³¼ë¡œ ë‚˜ì˜¨ ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë” ì‹œì ì˜ stateë¥¼ ë°”íƒ•ìœ¼ë¡œ props, event handler, local variablesë“¤ë„ í•¨ê»˜ ê³„ì‚°ëœë‹¤. -> ê·¸ ìˆœê°„ì˜ UIì˜ snapshotì™€ ê°™ë‹¤.

</br>

- _**React re-renders a component :**_

  > ğŸ­. Reactê°€ ì»´í¬ë„ŒíŠ¸ ( í•¨ìˆ˜ )ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•œë‹¤.
  >
  > ğŸ¤. ì»´í¬ë„ŒíŠ¸ ( í•¨ìˆ˜ )ê°€ ìƒˆë¡œìš´ JSX snapshotë¥¼ ë°˜í™˜í•˜ê³ 
  >
  > ğŸ¥. Reactê°€ í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ìƒˆë¡œìš´ snapshotì— ë§ê²Œ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•œë‹¤.

</br>

```javascript
import { useState } from "react";

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button
        onClick={() => {
          setNumber(number + 1);
          setNumber(number + 1);
          setNumber(number + 1);
        }}
      >
        +3
      </button>
    </>
  );
}
```

<p>
ìœ„ ì½”ë“œì—ì„œ +3 ë²„íŠ¼ì„ í´ë¦­í•˜ê²Œ ë˜ë©´ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?

setNumber(number + 1)ì´ ì„¸ ë²ˆ ì‹¤í–‰ëœë‹¤. ê·¸ë ‡ë‹¤ë©´ numberê°’ì´ 3ì´ ë˜ëŠ”ê²ƒì¸ê°€?

ì•„ë‹ˆë‹¤. onClick ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ëŠ” ë Œë”ì—ì„œëŠ” numberì˜ ê°’ì´ 0ìœ¼ë¡œ ë™ì¼í•˜ë‹¤.

ê·¸ë ‡ê¸°ì— ì„¸ ë²ˆ ëª¨ë‘ setNumber(1)ë¡œ ë™ì‘í•˜ê²Œ ë˜ì–´ numberê°’ì€ 1ì´ë‹¤.

ì™œ ì´ëŸ° ìƒí™©ì´ ëœê±¸ê¹Œ?

ReactëŠ” ëª¨ë“  state ë³€ê²½ ìš”ì²­ì„ í•œêº¼ë²ˆì— ì²˜ë¦¬í•˜ê³  stateë¥¼ 1ë¡œ ë°”ê¾¼ ë’¤, ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•œë‹¤.

ì´ë§ì€ ì¦‰, stateê°€ ë Œë” ì‹œì  ê¸°ì¤€ì˜ snapshotìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë ‡ê¸°ì— setXXXë¡œ ì—¬ëŸ¬ë²ˆ ë³€ê²½ì„ í•´ë„

ëª¨ë‘ í˜„ì¬ snapshot ê°’ì„ ì“´ ë‹¤ìŒ ë³€ê²½ì´ í•œ ë²ˆë§Œ ë°˜ì˜ë˜ëŠ” ê²ƒì´ë‹¤.

</p>

</br>

> Queue a Series of State Updates

</br>

_**React batches state updates**_ :

<p>

stateë¥¼ setí•˜ë©´ ì¦‰ì‹œ ë Œë”ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ëª¨ë‘ ëë‚œ í›„ì— í•œ ë²ˆì— ì²˜ë¦¬ ( batching ) ëœë‹¤.

ê·¸ë˜ì„œ setNumberë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•´ë„ ê·¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ëë‚˜ì•¼ ë Œë”ê°€ ë°œìƒí•œë‹¤.

</p>

</br>

_**Updating the same state multiple times before the next render**_ :

```javascript
import { useState } from "react";

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button
        onClick={() => {
          setNumber((n) => n + 1);
          setNumber((n) => n + 1);
          setNumber((n) => n + 1);
        }}
      >
        +3
      </button>
    </>
  );
}
```

<p>

ë‹¨ìˆœíˆ setNumber(number + 1)ì„ ì—°ì† í˜¸ì¶œí•˜ë©´, ëª¨ë‘ ê°’ì€ ê°’(í˜„ì¬ ë Œë” ê¸°ì¤€)ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ëœë‹¤.

-> ì´ë§ì€ ì¦‰, ê¸°ëŒ€ê°’ê³¼ ê²°ê³¼ê°’ì´ ë‹¤ë¥´ë‹¤.

ê·¸ë ‡ê¸°ì— ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ë°©ì‹ ( setNumber(n => n + 1) )ì„ ì‚¬ìš©í•˜ë©´ ì´ì „ ê°’ ê¸°ì¤€ìœ¼ë¡œ ë°˜ì˜ëœë‹¤.

</p>

_**What happens if you update state after replacing it**_ :

- set í•¨ìˆ˜ë¥¼ ì¡°í•©í•œ ì—¬ëŸ¬ê°€ì§€ ë™ì‘ ë°©ì‹

```javascript
---------------------------------

setNumber(number + 5)

setNumber(n => n + 1)

â†’ ìµœì¢… ê²°ê³¼ëŠ” 0 + 5 â†’ 5, 5 + 1 â†’ 6

---------------------------------

setNumber(number + 5)

setNumber(n => n + 1)

setNumber(42)

â†’ ë§ˆì§€ë§‰(42)ë§Œ ë‚¨ì•„ stateëŠ” 42ê°€ ë¨

---------------------------------
```

<p>

ì´ ì •ë¦¬ë¥¼ í•˜ìë©´, setState(ê°’)ì€ êµì²´ ìš”ì²­ì´ê³ , setState(í•¨ìˆ˜)ëŠ” ëˆ„ì  or ì—°ì‚° ìš”ì²­ì´ë‹¤.

ë˜í•œ ì—…ë°ì´í„° í•¨ìˆ˜ëŠ” í•­ìƒ ì´ì „ state ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.

ê·¸ë¦¬ê³  í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ ì—¬ëŸ¬ setStateëŠ” ê²°ê³¼ì ìœ¼ë¡œ í•œ ë²ˆì˜ ë Œë”ë¡œ ì²˜ë¦¬ëœë‹¤.

</p>

</br>

_**Naming conventions**_ :

```javascript
setEnabled(e => !e), setFriendCount(fc => fc + 1), etc.
```

<p>

ì—…ë°ì´í„° í•¨ìˆ˜ì˜ ì¸ìëŠ” ìƒíƒœëª…ì„ ì•½ì–´ ë˜ëŠ” í’€ë„¤ì„ìœ¼ë¡œ ì“¸ ìˆ˜ ìˆë‹¤.

</p>

</br>

> _**Recap**_
>
> ğŸ­. **state ì„¤ì •ì€ ê¸°ì¡´ ë Œë”ì˜ ë³€ìˆ˜ê°€ ë°”ë¡œ ë°”ë€ŒëŠ”ê²Œ ì•„ë‹ˆê³ , ìƒˆë¡œìš´ ë Œë”ë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒì´ë‹¤.**
>
> ğŸ¤. **state ì—…ë°ì´íŠ¸ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ëë‚œ í›„ í•œ ë²ˆì— ì²˜ë¦¬ ëœë‹¤( batching ).**
>
> ğŸ¥. **ì—¬ëŸ¬ ë²ˆ stateë¥¼ ë°”ê¾¸ë ¤ë©´ ì—…ë°ì´í„° í•¨ìˆ˜ íŒ¨í„´ì„ í™œìš©í•˜ì.**
